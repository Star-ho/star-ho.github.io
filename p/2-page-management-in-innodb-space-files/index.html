<!doctype html><html lang=ko-kr dir=ltr><head><meta charset=utf-8><meta name=viewport content='width=device-width,initial-scale=1'><meta name=description content="Extent 64ê°œì˜ ì—°ì†ëœ í˜ì´ì§€ì¸ 1MiBë¸”ë¡ spaceì—ì„œ í˜ì´ì§€ë¥¼ ê´€ë¦¬í•˜ë ¤ë©´ ë³µì¡í•˜ê¸°ì—, ì¤‘ê°„ì— Extentë¥¼ ë‘ì–´ spaceëŠ” Extentë¥¼ ê´€ë¦¬í•˜ê³ , Extentì—ì„œ pageë¥¼ ê´€ë¦¬ InnodbëŠ” FSD_HDRê³¼ XDESí˜ì´ì§€ë¥¼ ê³ ì •ëœ ìœ„ì¹˜ì— ë‘ì–´ extentê°€ ì‚¬ìš©ì¤‘ì¸ì§€, extentë‚´ì˜ ì‚¬ìš©ì¤‘ì¸ í˜ì´ì§€ë¥¼ ì¶”ì í•¨ FSP_HDR/XDES êµ¬ì¡° ìš”ì•½ "><title>2-Page management in Innodb space files</title>
<link rel=canonical href=https://sungho94.me/p/2-page-management-in-innodb-space-files/><link rel=stylesheet href=/scss/style.min.0304c6baf04e01a8fe70693791cb744d56a3578a3120a8796cefc66825aa39c7.css><meta property='og:title' content="2-Page management in Innodb space files"><meta property='og:description' content="Extent 64ê°œì˜ ì—°ì†ëœ í˜ì´ì§€ì¸ 1MiBë¸”ë¡ spaceì—ì„œ í˜ì´ì§€ë¥¼ ê´€ë¦¬í•˜ë ¤ë©´ ë³µì¡í•˜ê¸°ì—, ì¤‘ê°„ì— Extentë¥¼ ë‘ì–´ spaceëŠ” Extentë¥¼ ê´€ë¦¬í•˜ê³ , Extentì—ì„œ pageë¥¼ ê´€ë¦¬ InnodbëŠ” FSD_HDRê³¼ XDESí˜ì´ì§€ë¥¼ ê³ ì •ëœ ìœ„ì¹˜ì— ë‘ì–´ extentê°€ ì‚¬ìš©ì¤‘ì¸ì§€, extentë‚´ì˜ ì‚¬ìš©ì¤‘ì¸ í˜ì´ì§€ë¥¼ ì¶”ì í•¨ FSP_HDR/XDES êµ¬ì¡° ìš”ì•½ "><meta property='og:url' content='https://sungho94.me/p/2-page-management-in-innodb-space-files/'><meta property='og:site_name' content="Sungho's Dev BLog"><meta property='og:type' content='article'><meta property='article:section' content='Post'><meta property='article:tag' content='InnoDB'><meta property='article:tag' content='hugo_blog'><meta property='article:tag' content='InnoDB-File-Structure'><meta property='article:tag' content='Database'><meta property='article:published_time' content='2024-05-12T17:45:54+00:00'><meta property='article:modified_time' content='2024-09-22T06:57:48+00:00'><meta name=twitter:title content="2-Page management in Innodb space files"><meta name=twitter:description content="Extent 64ê°œì˜ ì—°ì†ëœ í˜ì´ì§€ì¸ 1MiBë¸”ë¡ spaceì—ì„œ í˜ì´ì§€ë¥¼ ê´€ë¦¬í•˜ë ¤ë©´ ë³µì¡í•˜ê¸°ì—, ì¤‘ê°„ì— Extentë¥¼ ë‘ì–´ spaceëŠ” Extentë¥¼ ê´€ë¦¬í•˜ê³ , Extentì—ì„œ pageë¥¼ ê´€ë¦¬ InnodbëŠ” FSD_HDRê³¼ XDESí˜ì´ì§€ë¥¼ ê³ ì •ëœ ìœ„ì¹˜ì— ë‘ì–´ extentê°€ ì‚¬ìš©ì¤‘ì¸ì§€, extentë‚´ì˜ ì‚¬ìš©ì¤‘ì¸ í˜ì´ì§€ë¥¼ ì¶”ì í•¨ FSP_HDR/XDES êµ¬ì¡° ìš”ì•½ "><link rel="shortcut icon" href=/favicon.png><script async src="https://www.googletagmanager.com/gtag/js?id=G-PTKY5BPR7H"></script><script>var dnt,doNotTrack=!1;if(!1&&(dnt=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,doNotTrack=dnt=="1"||dnt=="yes"),!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-PTKY5BPR7H")}</script></head><body class=article-page><script>(function(){const e="StackColorScheme";localStorage.getItem(e)||localStorage.setItem(e,"auto")})()</script><script>(function(){const t="StackColorScheme",e=localStorage.getItem(t),n=window.matchMedia("(prefers-color-scheme: dark)").matches===!0;e=="dark"||e==="auto"&&n?document.documentElement.dataset.scheme="dark":document.documentElement.dataset.scheme="light"})()</script><div class="container main-container flex on-phone--column extended"><aside class="sidebar left-sidebar sticky"><button class="hamburger hamburger--spin" type=button id=toggle-menu aria-label="ë©”ë‰´ ì—¬ë‹«ê¸°">
<span class=hamburger-box><span class=hamburger-inner></span></span></button><header><figure class=site-avatar><a href=/><img src=/img/avatar_hu1582294339771580780.png width=300 height=300 class=site-logo loading=lazy alt=Avatar>
</a><span class=emoji>ğŸ¥</span></figure><div class=site-meta><h1 class=site-name><a href=/>Sungho's Dev BLog</a></h1><h2 class=site-description>ë°±ì—”ë“œ ê°œë°œì í™©ì„±í˜¸ì…ë‹ˆë‹¤.</h2></div></header><ol class=menu-social><li><a href=https://github.com/Star-ho target=_blank title=GitHub rel=me><svg class="icon icon-tabler icon-tabler-brand-github" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M9 19c-4.3 1.4-4.3-2.5-6-3m12 5v-3.5c0-1 .1-1.4-.5-2 2.8-.3 5.5-1.4 5.5-6a4.6 4.6.0 00-1.3-3.2 4.2 4.2.0 00-.1-3.2s-1.1-.3-3.5 1.3a12.3 12.3.0 00-6.2.0C6.5 2.8 5.4 3.1 5.4 3.1a4.2 4.2.0 00-.1 3.2A4.6 4.6.0 004 9.5c0 4.6 2.7 5.7 5.5 6-.6.6-.6 1.2-.5 2V21"/></svg></a></li><li><a href=https://www.linkedin.com/in/starho/ target=_blank title=LinkedIn rel=me><svg fill="#000" width="800" height="800" viewBox="0 0 24 24"><path d="M6.975 20.667H3.117V9.059H6.975zM5.072 3.462a2.011 2.011.0 10-.051 4.012h.026a2.012 2.012.0 10.025-4.012zM9.111 20.667h3.858V14.185a2.639 2.639.0 01.127-.941 2.111 2.111.0 011.98-1.411c1.4.0 1.955 1.064 1.955 2.625v6.209h3.858V14.011c0-3.565-1.9-5.225-4.442-5.225A3.828 3.828.0 0012.97 10.7V9.059H9.111c.051 1.089.0 11.609.0 11.609z"/></svg></a></li></ol><ol class=menu id=main-menu><li><a href=/><svg class="icon icon-tabler icon-tabler-home" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><polyline points="5 12 3 12 12 3 21 12 19 12"/><path d="M5 12v7a2 2 0 002 2h10a2 2 0 002-2v-7"/><path d="M9 21v-6a2 2 0 012-2h2a2 2 0 012 2v6"/></svg>
<span>Home</span></a></li><li><a href=/archives/><svg class="icon icon-tabler icon-tabler-archive" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><rect x="3" y="4" width="18" height="4" rx="2"/><path d="M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8"/><line x1="10" y1="12" x2="14" y2="12"/></svg>
<span>Archives</span></a></li><li><a href=/search/><svg class="icon icon-tabler icon-tabler-search" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="10" cy="10" r="7"/><line x1="21" y1="21" x2="15" y2="15"/></svg>
<span>Search</span></a></li><li><a href=/links/><svg class="icon icon-tabler icon-tabler-link" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M10 14a3.5 3.5.0 005 0l4-4a3.5 3.5.0 00-5-5l-.5.5"/><path d="M14 10a3.5 3.5.0 00-5 0l-4 4a3.5 3.5.0 005 5l.5-.5"/></svg>
<span>Links</span></a></li><li class=menu-bottom-section><ol class=menu><li id=dark-mode-toggle><svg class="icon icon-tabler icon-tabler-toggle-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="8" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg>
<svg class="icon icon-tabler icon-tabler-toggle-right" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="16" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg>
<span>ë‹¤í¬ ëª¨ë“œ</span></li></ol></li></ol></aside><aside class="sidebar right-sidebar sticky"><section class="widget archives"><div class=widget-icon><svg class="icon icon-tabler icon-tabler-hash" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><line x1="5" y1="9" x2="19" y2="9"/><line x1="5" y1="15" x2="19" y2="15"/><line x1="11" y1="4" x2="7" y2="20"/><line x1="17" y1="4" x2="13" y2="20"/></svg></div><h2 class="widget-title section-title">ëª©ì°¨</h2><div class=widget--toc><nav id=TableOfContents><ol><li><a href=#extent>Extent</a><ol><li><a href=#fsp_hdrxdes-êµ¬ì¡°-ìš”ì•½>FSP_HDR/XDES êµ¬ì¡° ìš”ì•½</a></li><li><a href=#extent-decriptor>Extent decriptor</a></li></ol></li><li><a href=#list---free-list>List - free list</a><ol><li><a href=#list-base-node>List base node</a></li><li><a href=#list-node>List Node</a></li></ol></li><li><a href=#fsp-header-ìƒì„¸>FSP Header ìƒì„¸</a></li><li><a href=#file-segment-inode>file segment, INODE</a><ol><li><a href=#inode-pages>INODE pages</a></li><li><a href=#inode-entry>INODE ENTRY</a></li></ol></li><li><a href=#indexëŠ”-ì–´ë–»ê²Œ-file-segmentsë¥¼-ì‚¬ìš©í• ê¹Œ>IndexëŠ” ì–´ë–»ê²Œ file segmentsë¥¼ ì‚¬ìš©í• ê¹Œ</a><ol><li><a href=#ì¸ë±ìŠ¤ì—-ëŒ€í•œ-ì „ì²´-multi-level>ì¸ë±ìŠ¤ì— ëŒ€í•œ ì „ì²´ multi level</a></li></ol></li></ol></nav></div></section></aside><main class="main full-width"><article class=main-article><header class=article-header><div class=article-details><header class=article-category><a href=/categories/database/>Database
</a><a href=/categories/innodb_ruby/>Innodb_ruby</a></header><div class=article-title-wrapper><h2 class=article-title><a href=/p/2-page-management-in-innodb-space-files/>2-Page management in Innodb space files</a></h2></div><footer class=article-time><div><svg class="icon icon-tabler icon-tabler-calendar-time" width="56" height="56" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M11.795 21H5a2 2 0 01-2-2V7a2 2 0 012-2h12a2 2 0 012 2v4"/><circle cx="18" cy="18" r="4"/><path d="M15 3v4"/><path d="M7 3v4"/><path d="M3 11h16"/><path d="M18 16.496V18l1 1"/></svg>
<time class=article-time--published>May 12, 2024</time></div><div><svg class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><polyline points="12 7 12 12 15 15"/></svg>
<time class=article-time--reading>6 ë¶„ ì •ë„</time></div></footer></div></header><section class=article-content><h2 id=extent>Extent</h2><ul><li>64ê°œì˜ ì—°ì†ëœ í˜ì´ì§€ì¸ 1MiBë¸”ë¡</li><li>spaceì—ì„œ í˜ì´ì§€ë¥¼ ê´€ë¦¬í•˜ë ¤ë©´ ë³µì¡í•˜ê¸°ì—, ì¤‘ê°„ì— Extentë¥¼ ë‘ì–´ spaceëŠ” Extentë¥¼ ê´€ë¦¬í•˜ê³ , Extentì—ì„œ pageë¥¼ ê´€ë¦¬</li><li>InnodbëŠ” FSD_HDRê³¼ XDESí˜ì´ì§€ë¥¼ ê³ ì •ëœ ìœ„ì¹˜ì— ë‘ì–´ extentê°€ ì‚¬ìš©ì¤‘ì¸ì§€, extentë‚´ì˜ ì‚¬ìš©ì¤‘ì¸ í˜ì´ì§€ë¥¼ ì¶”ì í•¨</li></ul><h3 id=fsp_hdrxdes-êµ¬ì¡°-ìš”ì•½>FSP_HDR/XDES êµ¬ì¡° ìš”ì•½</h3><p><img src=/image/real-resource-image/Pasted%20image%2020240512174953.png loading=lazy alt=center></p><ul><li>FIL Headerì™€ trailer, FSP Headerì™€ 256ê°œì˜ extent discriptors(EHSMS descriptors)ê°€ í¬í•¨ë¨<ul><li>ë§ì€ ì–‘ì˜ ë¯¸ì‚¬ìš©ê³µê°„ë„ í¬í•¨ë¨</li></ul></li><li>ì•„ë˜ì— ë” ìì„¸í•œ ì„¤ëª… ìˆìŒ</li></ul><h3 id=extent-decriptor>Extent decriptor</h3><p><img src=/image/real-resource-image/Pasted%20image%2020240512175239.png loading=lazy alt=center></p><ul><li>File Segment ID<ul><li>extentê°€ íŒŒì¼ ì„¸ê·¸ë¨¼íŠ¸ì— ì†í• ì‹œ, extentê°€ ì†í•œ íŒŒì¼ ì„¸ê·¸ë¨¼íŠ¸ id</li></ul></li><li>List node for XDES list<ul><li>double linked extent descriptor ëª©ë¡ì˜ ì´ì „ ë° ë‹¤ìŒ extentë¥¼ ê°€ë¥´í‚¤ëŠ” í¬ì¸í„°</li></ul></li><li>State<ul><li>extentì˜ í˜„ì¬ ìƒíƒœë¥¼ ë‚˜íƒ€ëƒ„(4ê°€ì§€ ìƒíƒœê°€ ìˆìŒ)<ul><li>í•´ë‹¹ extentê°€ ë™ì¼í•œ spaceëª©ë¡ì— ì†í•˜ëŠ” FREE, FREE_FRAG, FULL_FRAG ìƒíƒœ<ul><li>ì•„ë˜ì—ì„œ ìì„¸í•œ ì„¤ëª…</li></ul></li><li>í•´ë‹¹ extentê°€ íŒŒì¼ ì„¸ê·¸ë¨¼íŠ¸ IDí•„ë“œì— ì €ì¥ëœ IDë¥¼ ê°€ì§„ íŒŒì¼ ì„¸ê·¸ë¨¼íŠ¸ì— ì†í•¨ì„ ì˜ë¯¸í•˜ëŠ” FSEGìƒíƒœ</li></ul></li></ul></li><li>Page State Bitmap<ul><li>2ê°œì˜ ë¹„íŠ¸ë¡œ í˜ì´ì§€ê°€ freeí•œì§€, clean í•œì§€ ë‚˜íƒ€ëƒ„<ul><li>ì²«ë²ˆë¹¼ ë¹„íŠ¸ëŠ” í˜ì´ì§€ê°€ freeí•œì§€ ì—¬ë¶€</li><li>ë‘ë²ˆì§¸ ë¹„íŠ¸ëŠ” cleaní•œì§€ ì—¬ë¶€<ul><li>í˜„ì¬ ì‚¬ìš©ë˜ì§€ ì•ŠëŠ”ë‹¤ë©´ 1ë¡œ í• ë‹¹ë¨</li></ul></li></ul></li></ul></li><li>extentë¥¼ ì°¸ì¡°í•˜ëŠ” ë‹¤ë¥¸ êµ¬ì¡°ì—ì„œëŠ” extent&rsquo;s descriptorê°€ ìˆëŠ” FSP_HDR ë˜ëŠ” XDES í˜ì´ì§€ ë²ˆí˜¸ì™€, descriptor entryê°€ ì¡´ì¬í•˜ëŠ” í˜ì´ì§€ì˜ byte offsetì„ ì¡°í•©í•˜ì—¬ ìœ„ì¹˜ë¥¼ ë‚˜íƒ€ëƒ„<ul><li>page 0 offset 150ì€ ì²«ë²ˆì§¸ í˜ì´ì§€ì—ì„œ 150ë²ˆì§¸ ì˜¤í”„ì…‹ì˜ XDES Entryë¥¼ ì°¸ì¡°<ul><li>0-63í˜ì´ì§€ë¥¼ ê°€ì§€ê³  ìˆëŠ” XDES Entryì„</li></ul></li><li>page 16384 offset 270ì€ 16384í˜ì´ì§€ì—ì„œ 270ë²ˆì§¸ ì˜¤í”„ì…‹ì˜ XDES Entryë¥¼ ì°¸ì¡°<ul><li>16576-16639í˜ì´ì§€ë¥¼ ê°€ì§€ê³  ìˆëŠ” XDES Entryì„</li><li>page 16384ëŠ” ì‹¤ì œë¡œ ì²« ë²ˆì§¸ XDES í˜ì´ì§€ë¥¼ ì˜ë¯¸í•¨</li></ul></li></ul></li></ul><h2 id=list---free-list>List - free list</h2><ul><li>ListëŠ” ì—¬ëŸ¬ ê´€ë ¨ êµ¬ì¡°ë¥¼ í•¨ê»˜ ì—°ê²°í•  ìˆ˜ ìˆëŠ” ì¼ë°˜ì ì¸ êµ¬ì¡°ì²´</li><li>2ê°œì˜ ìƒí˜¸ë³´ì™„ì ì¸ êµ¬ì¡°ë¥¼ ì‚¬ìš©í•´ì„œ, ë””ìŠ¤í¬ìƒì˜ ì´ì¤‘ ë§í¬ë“œ ë¦¬ìŠ¤íŠ¸ë¥¼ êµ¬í˜„í•¨</li></ul><h3 id=list-base-node>List base node</h3><p><img src=/image/real-resource-image/Pasted%20image%2020240512201648.png loading=lazy alt=center></p><ul><li>í•˜ì´ë ˆë²¨êµ¬ì¡°(FSPí—¤ë”ì™€ ê°™ì€)ì—ì„œ í•œë²ˆë§Œ ì €ì¥ë¨</li><li>ë¦¬ìŠ¤íŠ¸ì˜ ê¸¸ì´ ë° ë¦¬ìŠ¤íŠ¸ì˜ ì²˜ìŒê³¼ ë§ˆì§€ë§‰ ë¦¬ìŠ¤íŠ¸ ë…¸ë“œì˜ ì •ë³´ë¥¼ í¬í•¨í•¨</li></ul><h3 id=list-node>List Node</h3><p><img src=/image/real-resource-image/Pasted%20image%2020240512201700.png loading=lazy alt=center></p><ul><li>ì´ì „ê³¼ ë‹¤ìŒ ë…¸ë“œì— ëŒ€í•œ í¬ì¸í„°ë¥¼ ì €ì¥í•¨</li><li>ëª¨ë“  í¬ì¸í„°ëŠ” í˜ì´ì§€ ë²ˆí˜¸(ê°™ì€ spaceë‚´ì— ìˆëŠ”)ì™€ ë¦¬ìŠ¤íŠ¸ ë…¸ë“œë¥¼ ì°¾ì„ ìˆ˜ ìˆëŠ” í•´ë‹¹ í˜ì´ì§€ ë‚´ì˜ byte offsetìœ¼ë¡œ êµ¬ì„±ë¨</li><li>ëª¨ë“  í¬ì¸í„°ëŠ” ë¦¬ìŠ¤íŠ¸ ë…¸ë“œì˜ ì‹œì‘ì„ ê°€ë¥´í‚´</li><li>ë°˜ë“œì‹œ ì„œë¡œ ì—°ê²°ëœ êµ¬ì¡°ëŠ” ì•„ë‹˜</li></ul><h2 id=fsp-header-ìƒì„¸>FSP Header ìƒì„¸</h2><p><img src=/image/real-resource-image/Pasted%20image%2020240512201947.png loading=lazy alt=center></p><ul><li>Space ID<ul><li>í˜„ì¬ spaceì˜ ID</li></ul></li><li>Highest page number in the space (size)<ul><li>íŒŒì¼ì´ ì»¤ì§ì— ë”°ë¼, ì¦ê°€ë˜ëŠ” ìœ íš¨í•œ ìµœëŒ€ í˜ì´ì§€ ìˆ˜</li><li>spaceí™•ì¥ì€ ì—¬ëŸ¬ ë‹¨ê³„ì— ê±¸ì³ ì´ë£¨ì–´ì§€ë¯€ë¡œ, ëª¨ë“  í˜ì´ì§€ê°€ ì´ˆê¸°í™” ë˜ì§€ ì•ŠìŒ(ì¼ë¶€ëŠ” 0ìœ¼ë¡œ ì±„ì›Œì§ˆ ìˆ˜ ìˆìŒ)</li></ul></li><li>Highest page number initialized (free limit)<ul><li>FILí—¤ë”ê°€ ì´ˆê¸°í™”ëœ ê°€ì¥ ë†’ì€ í˜ì´ì§€ ë²ˆí˜¸ë¡œ, í˜ì´ì§€ìì²´ì— í˜ì´ì§€ ë²ˆí˜¸ë¥¼ ì €ì¥í•¨</li><li>free lmitì€ í•­ìƒ ì´ í¬ê¸°ë³´ë‹¤ ì‘ê±°ë‚˜ ê°™ìŒ</li></ul></li><li>Flags<ul><li>spaceì™€ ì—°ê´€ëœ í”Œë˜ê·¸</li></ul></li><li>Next Unused Segment ID<ul><li>ë‹¤ìŒì— í• ë‹¹ë  íŒŒì¼ ì„¸ê·¸ë¨¼íŠ¸ì— ì‚¬ìš©ë  íŒŒì¼ ì„¸ê·¸ë¨¼íŠ¸ ID</li></ul></li><li>Number of pages used in theÂ FREE_FRAGÂ list<ul><li>ëª©ë¡ì˜ ëª¨ë“  extentsë¥¼ ìˆœíšŒí•˜ì§€ ì•Šê³  FREE_FRAGê°¯ìˆ˜ë¥¼ í™•ì¸í•  ìˆ˜ ìˆê²Œí•˜ê¸° ìœ„í•œ í•„ë“œ</li></ul></li><li>ë‹¤ìŒ extent descriptor listì˜ List base nodeë„ ì €ì¥ë¨<ul><li>FREE_FRAG<ul><li>ì—¬ìœ í˜ì´ì§€ê°€ ë‚¨ì•„ìˆëŠ” extentë¥¼ ë‚˜íƒ€ëƒ„<ul><li>ì—¬ìœ  í˜ì´ì§€ê°€ ìˆëŠ” extentëŠ” ê°œë³„ í˜ì´ì§€ë¥¼ ë‹¤ë¥¸ ìš©ë„ë¡œ ì‚¬ìš© ê°€ëŠ¥í•¨</li></ul></li><li>ì˜ˆë¥¼ë“¤ì–´, FSP_HDR ì´ë‚˜ XDES í˜ì´ì§€ê°€ ìˆëŠ” ëª¨ë“  extentëŠ” FREE_FRAG ëª©ë¡ì— ë°°ì¹˜ë’¤ì–´ ë‚¨ì€ free pageë¥¼ ë‹¤ë¥¸ ìš©ë„ë¡œ í• ë‹¹í•  ìˆ˜ ìˆìŒ</li></ul></li><li>FULL_FRAG<ul><li>FREE_FRAGì™€ ë˜‘ê°™ì§€ë§Œ, ì—¬ìœ í˜ì´ì§€ê°€ ì—†ëŠ” extentë¥¼ ë‚˜íƒ€ëƒ„</li><li>extentê°€ ê°€ë“ì°¨ë©´ FULL_FRAGë¡œ ì´ë™ë˜ë©°, í˜ì´ì§€ê°€ í•´ì œë˜ì–´ ê°€ë“ì°¨ ìˆì§€ ì•Šìœ¼ë©´ FREE_FRAGë¡œ ì´ë™ë¨</li></ul></li><li>FREE<ul><li>ì™„ì „íˆ ì‚¬ìš©ë˜ì§€ ì•Šê³ , íŠ¹ì • ìš©ë„ë¡œ ì „ì²´ í• ë‹¹í•  ìˆ˜ ìˆëŠ” extentë¥¼ ì˜ë¯¸í•¨</li><li>FREE extentëŠ” íŒŒì¼ì„¸ê·¸ë¨¼íŠ¸(ì ì ˆí•œ INODE ëª©ë¡ì— ë°°ì¹˜ë˜ê¸° ìœ„í•´)ì— í• ë‹¹ë˜ê±°ë‚˜, ê°œë³„ í˜ì´ì§€ ì‚¬ìš©ì„ ìœ„í•´ FREE_FRAGëª©ë¡ì´ë¡œ ì´ë™ë  ìˆ˜ ìˆìŒ</li></ul></li></ul></li></ul><h2 id=file-segment-inode>file segment, INODE</h2><ul><li>InnoDBëŠ” íŒŒì¼ì‹œìŠ¤í…œì—ì„œ ì‚¬ìš©í•˜ëŠ” file segment, INODEë¥¼ ì˜¤ë²„ë¡œë“œí•´ì„œ ì‚¬ìš©í•¨</li><li>InnoDBëŠ” inodeë¥¼ ë‹¤ìŒ 2ê°€ì§€ ìœ í˜•ì— ì‚¬ìš©í•¨<ul><li>INODE entires(í•˜ë‚˜ì˜ ì‘ì€ êµ¬ì¡°)</li><li>INODE pages(ë§ì€ INODE í•­ëª©ì„ í¬í•¨í•˜ëŠ” í˜ì´ì§€ ìœ í˜•)</li></ul></li><li>InnoDBì˜ INODEëŠ” ë‹¨ìˆœíˆ file segment(FSEG)ë¥¼ ì„¤ëª…í•  ë¿ì´ë©°, ì•ìœ¼ë¡œ &ldquo;file segment INODE"ë¼ ì¹­í•¨</li></ul><h3 id=inode-pages>INODE pages</h3><p><img src=/image/real-resource-image/Pasted%20image%2020240512220333.png loading=lazy alt=center></p><ul><li>ê°ê°ì˜ INODE pageëŠ” 85ê°œì˜ file segment INODE entries(ì´ 16KiB page)ë¥¼ í¬í•¨í•¨<ul><li>ê°ê°ì˜ INODE pageëŠ” 192ë°”ì´íŠ¸ì„</li></ul></li><li>INODE pageëŠ” FSP_HDRì˜ FSP í—¤ë” êµ¬ì¡°ì—ì„œ ì„¤ëª…í–ˆë˜ List nodeê°€ ìˆìŒ<ul><li>í•´ë‹¹ List nodeëŠ” INODE pagesë¥¼ ìœ„í•œ ê²ƒ, í•´ë‹¹ INODE pageì˜ INODEê°€ ì•„ë‹˜!</li><li>FREE_INODES<ul><li>ì ì–´ë„ í•˜ë‚˜ì˜ free file segment INODE entryê°€ ìˆëŠ” INODE pagesì˜ ë¦¬ìŠ¤íŠ¸</li></ul></li><li>FULL_INODES<ul><li>free file segment INODE entryê°€ í•˜ë‚˜ë„ ì—†ëŠ” INODE pagesì˜ ë¦¬ìŠ¤íŠ¸</li><li>file per table spaceë¥¼ ì‚¬ìš©í•˜ëŠ” ê²½ìš°, í…Œì´ë¸”ì— 42ê°œ ì´ìƒì˜ ì¸ë±ìŠ¤ê°€ ì—†ëŠ” í•œ ê° file per table space ì•ˆì— ìˆëŠ” í•´ë‹¹ ëª©ë¡ì€ ë¹„ì–´ìˆìŒ<ul><li>ê°ê°ì˜ indexëŠ” ì •í™•íˆ ë‘ê°œì˜ file segment INODE entryë¥¼ ì‚¬ìš©í•˜ê¸° ë•Œë¬¸</li></ul></li></ul></li></ul></li></ul><h3 id=inode-entry>INODE ENTRY</h3><p><img src=/image/real-resource-image/Pasted%20image%2020240512231201.png loading=lazy alt=center></p><ul><li>í•„ë“œ ì„¤ëª…<ul><li>File Segment ID<ul><li>file segment IDëŠ” í•´ë‹¹ file segment INODE entryë¥¼ ì˜ë¯¸í•¨</li><li>IDê°€ 0ì´ë©´ í•´ë‹¹ entryëŠ” ì‚¬ìš©ë˜ì§€ ì•Šì€ ê²ƒì„ ì˜ë¯¸</li></ul></li><li>Magic Number<ul><li>ê°’ì´ 97937874ì´ë©´ file segment INODE entryê°€ ì´ˆê¸°í™” ë˜ì—ˆë‹¤ëŠ” ê²ƒì„ ì˜ë¯¸</li></ul></li><li>Number of used pages in theÂ NOT_FULLÂ list<ul><li>spaceì˜ FREE_FLAG list(FSP headerì— ìˆëŠ”)ì™€ ì •í™•íˆ ê°™ìŒ</li><li>NOT_FULL ë¦¬ìŠ¤íŠ¸ ìˆ˜ ë¹ ë¥´ê²Œ í™•ì¸í•  ìˆ˜ ìˆê²Œ í•˜ê¸° ìœ„í•œ í•„ë“œ</li></ul></li><li>Fragment Array<ul><li>spaceì— ìˆëŠ” FREE_FRAG ë˜ëŠ” FULL_FRAG ë¦¬ìŠ¤íŠ¸(&ldquo;fragment"ì˜ extent) ì•ˆì˜ extentë¡œë¶€í„° ê°œë³„ì ìœ¼ë¡œ í• ë‹¹ëœ 32í˜ì´ì§€ì˜ ë°°ì—´</li><li>í•´ë‹¹ arrayê°€ ê½‰ ì°¨ë©´, ì˜¤ì§ full extentsë§Œ file segmentì— í• ë‹¹ë  ìˆ˜ ìˆìŒ</li></ul></li></ul></li><li>tableì´ ì»¤ì§€ë©´ ê° file segmentëŠ” ë°°ì—´ì´ ê°€ë“ ì°°ë•Œê¹Œì§€, ê° file segmentì— ê°œë³„ pagesë“¤ì„ í• ë‹¹í•˜ê³ , ì´í›„ 1ê°œì˜ extentë¥¼ í• ë‹¹í•¨, ê²°êµ­ì—ëŠ” 4ê°œì˜ extentê°€ í• ë‹¹ë¨</li><li>extent descriptorsì˜ list base nodeë˜í•œ ê°ê°ì˜ file segment INODE entryì— ë‚˜íƒ€ë‚¨<ul><li>FREE<ul><li>ì™„ì „íˆ ì‚¬ìš©ë˜ì§€ ì•Šê³ , í•´ë‹¹ file segmentì— í• ë‹¹ëœ extents</li></ul></li><li>NOT_FULL<ul><li>í•´ë‹¹ file segmentì— í• ë‹¹ëœ ì‚¬ìš©ëœ í˜ì´ì§€ê°€ í•˜ë‚˜ ì´ìƒ ìˆëŠ” extents</li><li>ë§ˆì§€ë§‰ ì‚¬ìš©ê°€ëŠ¥í•œ í˜ì´ì§€ê°€ ì‚¬ìš©ë˜ë©´, extentsëŠ” FULL listë¡œ ì´ë™í•¨</li></ul></li><li>FULL<ul><li>í•´ë‹¹ file segmentì— í• ë‹¹ëœ ì‚¬ìš©ê°€ëŠ¥í•œ í˜ì´ì§€ê°€ ì—†ëŠ” extent</li><li>í˜ì´ì§€ê°€ ì—¬ìœ ê°€ ìƒê¸°ë©´, NOT_FULL ëª©ë¡ì´ë„ ì´ë™í•¨</li></ul></li><li>ë§ˆì§€ë§‰ìœ¼ë¡œ ì‚¬ìš©ëœ pageê°€ NOT_FULL ëª©ë¡ì˜ ë²”ìœ„ì—ì„œ í•´ì œë˜ë©´, í•´ë‹¹ extentëŠ” file segment&rsquo;sì˜ FREEë¡œ ì´ë™ë  ìˆ˜ ìˆì§€ë§Œ, ì‹¤ì œë¡œëŠ” spaceì˜ FREE listë¡œ ì´ë™ë¨</li></ul></li></ul><h2 id=indexëŠ”-ì–´ë–»ê²Œ-file-segmentsë¥¼-ì‚¬ìš©í• ê¹Œ>IndexëŠ” ì–´ë–»ê²Œ file segmentsë¥¼ ì‚¬ìš©í• ê¹Œ</h2><ul><li>ì¸ë±ìŠ¤ í˜ì´ì§€ì— ëŒ€í•œ ì„¤ëª…ì€ ì—†ì§€ë§Œ, í•œê°€ì§€ ì‘ì€ ì¸¡ë©´ì„ ì‚´í´ë³¼ ìˆ˜ ìˆìŒ</li><li>ê° ì¸ë±ìŠ¤ì˜ FSEGì˜ ë£¨íŠ¸í˜ì´ì§€ëŠ” ì¸ë±ìŠ¤ì—ì„œ ì‚¬ìš©í•˜ëŠ” íŒŒì¼ ì„¸ê·¸ë¨¼íŠ¸ë¥¼ ì„¤ëª…í•˜ëŠ” file segment INODE entryì— ëŒ€í•œ í¬ì¸í„°ê°€ í¬í•¨ë˜ì–´ ìˆìŒ</li><li>ê° ì¸ë±ìŠ¤ëŠ” leafí˜ì´ì§€ì— í•˜ë‚˜ì˜ ì„¸ê·¸ë¨¼íŠ¸ì™€, non-leafí˜ì´ì§€ì— í•˜ë‚˜ì˜ íŒŒì¼ ì„¸ê·¸ë¨¼íŠ¸ë¥¼ ì‚¬ìš©í•¨</li><li>ì´ ì •ë³´ëŠ” FSEG header êµ¬ì¡°ì— ì €ì¥ë˜ì–´ ìˆìŒ<br><img src=/image/real-resource-image/Pasted%20image%2020240512234447.png loading=lazy alt=center></li><li>space IDëŠ” ë¶ˆí•„ìš”í•œ ê²ƒìœ¼ë¡œ, í•­ìƒ í˜„ì¬ sapceì™€ ë™ì¼í•¨</li><li>page numberì™€ offsetì€ file segment INODE entryë¥¼ ê°€ë¥´í‚´</li><li>ë‘ íŒŒì¼ ì„¸ê·¸ë¨¼íŠ¸ëŠ” ì™„ì „íˆ ë¹„ì–´ìˆì–´ë„ í•­ìƒ ì¡´ì¬í•¨<ul><li>ì˜ˆë¥¼ ë“¤ë©´ ìƒˆë¡œ ë§Œë“  í…Œì´ë¸”ì—ì„œ ì¡´ì¬í•˜ëŠ” í˜ì´ì§€ëŠ” ë£¨íŠ¸í˜ì´ì§€ì´ë©° ë¦¬í”„í˜ì´ì§€ ì´ê¸°ë„ í•˜ì§€ë§Œ, internal file segmentì— ì¡´ì¬í•˜ë¯€ë¡œ ë‚˜ì¤‘ì— ì˜®ê¸¸ í•„ìš”ê°€ ì—†ìŒ</li><li>leaf file segmentì˜INODE listì™€ fragmentëŠ” ëª¨ë‘ ë¹„ì–´ìˆìŒ</li><li>internal file segment INODE listëŠ” ëª¨ë‘ ë¹„ì–´ìˆê³ , ë‹¨ì¼ ë£¨íŠ¸ í˜ì´ì§€ëŠ” fragment arrayì— ìˆìŒ</li></ul></li></ul><h3 id=ì¸ë±ìŠ¤ì—-ëŒ€í•œ-ì „ì²´-multi-level>ì¸ë±ìŠ¤ì— ëŒ€í•œ ì „ì²´ multi level</h3><p><img src=/image/real-resource-image/Pasted%20image%2020240512234938.png loading=lazy alt=center></p><ul><li>index root pagesëŠ” ë‘ê°œì˜ inodes(file segment)ë¥¼ ê°€ë¥´í‚¤ë©°, ê°ê°ì€ fragment array(fragment listì—ì„œ ìµœëŒ€ 32ê°œì˜ ê°œë³„ í˜ì´ì§€ë¥¼ ê°€ë¥´í‚´)ì „ì²´ extents ëª©ë¡(extent descriptorì˜ ë¦¬ìŠ¤íŠ¸ í¬ì¸í„°ë¥¼ ì‚¬ìš©í•˜ì—¬ ì—°ê²°ëœ)ì„ ê°€ì§</li><li>extent descriptorëŠ” extentë¥¼ ì°¸ì¡°í•  ë¿ ì•„ë‹ˆë¼, extentë‚´ free pageë¥¼ ì¶”ì í•˜ëŠ” ë°ë„ ì‚¬ìš©ë¨</li></ul><p>ì°¸ê³ <br><a class=link href=https://blog.jcole.us/2013/01/04/page-management-in-innodb-space-files/ target=_blank rel=noopener>https://blog.jcole.us/2013/01/04/page-management-in-innodb-space-files/</a><br><a class=link href=https://dev.mysql.com/blog-archive/innodb-tablespace-space-management/ target=_blank rel=noopener>https://dev.mysql.com/blog-archive/innodb-tablespace-space-management/</a><br><a class=link href=https://dev.mysql.com/blog-archive/extent-descriptor-page-of-innodb/ target=_blank rel=noopener>https://dev.mysql.com/blog-archive/extent-descriptor-page-of-innodb/</a></p></section><footer class=article-footer><section class=article-tags><a href=/tags/innodb/>InnoDB</a>
<a href=/tags/hugo_blog/>Hugo_blog</a>
<a href=/tags/innodb-file-structure/>InnoDB-File-Structure</a>
<a href=/tags/database/>Database</a></section><section class=article-copyright><svg class="icon icon-tabler icon-tabler-copyright" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><path d="M14.5 9a3.5 4 0 100 6"/></svg>
<span>Licensed under CC BY-NC-SA 4.0</span></section><section class=article-lastmod><svg class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><polyline points="12 7 12 12 15 15"/></svg>
<span>ë§ˆì§€ë§‰ ìˆ˜ì •: Sep 22, 2024 06:57 UTC</span></section></footer></article><aside class=related-content--wrapper><h2 class=section-title>ê´€ë ¨ ê¸€</h2><div class=related-content><div class="flex article-list--tile"><article><a href=/p/7-mysql-8.0%EC%97%90%EC%84%9C%EB%8A%94/><div class=article-details><h2 class=article-title>7-Mysql 8.0ì—ì„œëŠ”?</h2></div></a></article><article><a href=/p/5-physical-structure-of-records-in-innodb/><div class=article-details><h2 class=article-title>5-physical structure of records in InnoDB</h2></div></a></article><article><a href=/p/4-b-tree-index-structure/><div class=article-details><h2 class=article-title>4-B+tree index structure</h2></div></a></article><article><a href=/p/3-innodb-index/><div class=article-details><h2 class=article-title>3-InnoDB Index</h2></div></a></article><article><a href=/p/1-page-space-idb-file-structure/><div class=article-details><h2 class=article-title>1-page, space, idb file structure</h2></div></a></article></div></div></aside><script src=https://utteranc.es/client.js repo=Star-ho/star-ho.github.io issue-term=pathname label=Comments crossorigin=anonymous async></script><style>.utterances{max-width:unset}</style><script>let utterancesLoaded=!1;function setUtterancesTheme(e){let t=document.querySelector(".utterances iframe");t&&t.contentWindow.postMessage({type:"set-theme",theme:`github-${e}`},"https://utteranc.es")}addEventListener("message",e=>{if(e.origin!=="https://utteranc.es")return;utterancesLoaded=!0,setUtterancesTheme(document.documentElement.dataset.scheme)}),window.addEventListener("onColorSchemeChange",e=>{if(!utterancesLoaded)return;setUtterancesTheme(e.detail)})</script><footer class=site-footer><section class=copyright>&copy;
2020 -
2024 Sungho's Dev BLog</section><section class=powerby><a href=https://gohugo.io/ target=_blank rel=noopener>Hugo</a>ë¡œ ë§Œë“¦<br><a href=https://jimmycai.com target=_blank rel=noopener>Jimmy</a>ì˜ <b><a href=https://github.com/CaiJimmy/hugo-theme-stack target=_blank rel=noopener data-version=3.26.0>Stack</a></b> í…Œë§ˆ ì‚¬ìš© ì¤‘</section></footer><div class=pswp tabindex=-1 role=dialog aria-hidden=true><div class=pswp__bg></div><div class=pswp__scroll-wrap><div class=pswp__container><div class=pswp__item></div><div class=pswp__item></div><div class=pswp__item></div></div><div class="pswp__ui pswp__ui--hidden"><div class=pswp__top-bar><div class=pswp__counter></div><button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
<button class="pswp__button pswp__button--share" title=Share></button>
<button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
<button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button><div class=pswp__preloader><div class=pswp__preloader__icn><div class=pswp__preloader__cut><div class=pswp__preloader__donut></div></div></div></div></div><div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap"><div class=pswp__share-tooltip></div></div><button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
</button>
<button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)"></button><div class=pswp__caption><div class=pswp__caption__center></div></div></div></div></div><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo=" crossorigin=anonymous defer></script><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU=" crossorigin=anonymous defer></script><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.min.css crossorigin=anonymous><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.css crossorigin=anonymous></main></div><script src=https://cdn.jsdelivr.net/npm/node-vibrant@3.1.6/dist/vibrant.min.js integrity="sha256-awcR2jno4kI5X0zL8ex0vi2z+KMkF24hUW8WePSA9HM=" crossorigin=anonymous></script><script type=text/javascript src=/ts/main.js defer></script><script>(function(){const e=document.createElement("link");e.href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap",e.type="text/css",e.rel="stylesheet",document.head.appendChild(e)})()</script></body></html>